{"version":3,"sources":["utils/api.jsx","components/scanner.jsx","components/scanCode.jsx"],"names":["Ean","this","url","code","Promise","resolve","reject","Axios","post","params","then","res","catch","err","console","log","message","product","headers","Scanner","props","onDetected","useEffect","Quagga","init","config","video","document","getElementsByTagName","setAttribute","start","stop","onProcessed","result","drawingCtx","canvas","ctx","overlay","drawingCanvas","dom","boxes","clearRect","Number","getAttribute","filter","box","forEach","ImageDebug","drawPath","x","y","color","lineWidth","codeResult","line","detected","id","className","playsInline","autoPlay","Landing","history","useHistory","useState","camera","setCamera","setResult","setMessage","isSaving","setSaving","status","setStatus","Segment","Button","onClick","inverted","push","style","Api","sendToken","response","data"],"mappings":"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","file":"static/js/6.28ebf36a.chunk.js","sourcesContent":["import Axios from \"axios\";\nclass Ean {\n  constructor() {\n    this.url = \"https://scancbarcode.herokuapp.com/api\";\n  }\n  sendToken(code) {\n    return new Promise((resolve, reject) => {\n      Axios.post(`${this.url}/scan`, null, {\n        params: {\n          code: code,\n        },\n      })\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          console.log(err.message);\n          reject(err);\n        });\n    });\n  }\n  addProduct(product) {\n    return new Promise((resolve, reject) => {\n      Axios.post(`${this.url}/add`, product, {\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n      })\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n}\nexport default new Ean();\n","import React, { useEffect } from \"react\";\nimport config from \"./scannerConfig.json\";\nimport Quagga from \"quagga\";\nimport Webcam from 'react-webcam';\n\nconst Scanner = props => {\n  const { onDetected } = props;\n\n  useEffect(() => {\n\n    Quagga.init(config, err => {\n      if (err) {\n        console.log(err, \"error msg\");\n      }\n      let video = document.getElementsByTagName(\"video\")\n      video.setAttribute('autoplay', true);\n      video.setAttribute('playsinline', true);\n      video.setAttribute('capture', 'environment');\n      Quagga.start()\n      return () => {\n        Quagga.stop()\n      }\n    });\n\n    //detecting boxes on stream\n    Quagga.onProcessed(result => {\n      var drawingCtx = Quagga.canvas.ctx.overlay,\n        drawingCanvas = Quagga.canvas.dom.overlay;\n\n      if (result) {\n        if (result.boxes) {\n          drawingCtx.clearRect(\n            0,\n            0,\n            Number(drawingCanvas.getAttribute(\"width\")),\n            Number(drawingCanvas.getAttribute(\"height\"))\n          );\n          result.boxes\n            .filter(function(box) {\n              return box !== result.box;\n            })\n            .forEach(function(box) {\n              Quagga.ImageDebug.drawPath(box, { x: 0, y: 1 }, drawingCtx, {\n                color: \"green\",\n                lineWidth: 2\n              });\n            });\n        }\n\n        if (result.box) {\n          Quagga.ImageDebug.drawPath(result.box, { x: 0, y: 1 }, drawingCtx, {\n            color: \"#00F\",\n            lineWidth: 2\n          });\n        }\n\n        if (result.codeResult && result.codeResult.code) {\n          Quagga.ImageDebug.drawPath(\n            result.line,\n            { x: \"x\", y: \"y\" },\n            drawingCtx,\n            { color: \"red\", lineWidth: 3 }\n          );\n        }\n      }\n    });\n\n    Quagga.onDetected(detected);\n  });\n\n  const detected = result => {\n    onDetected(result.codeResult.code);\n  };\n\n  return (\n    // If you do not specify a target,\n    // QuaggaJS would look for an element that matches\n    // the CSS selector #interactive.viewport\n    <div id=\"interactive\" className=\"viewport\">\n      <video playsInline={true} autoPlay={true}></video>\n    </div>\n  );\n};\n\nexport default Scanner;\n","import React, { useState } from \"react\";\nimport Scanner from \"./scanner\";\nimport \"../styles/styles.css\";\nimport { Segment , Button } from 'semantic-ui-react'\nimport { useHistory } from \"react-router-dom\";\nimport Api from '../utils/api';\nexport default function Landing() {\n  let history = useHistory();\n  const [camera, setCamera] = useState(true);\n  const [result, setResult] = useState(5707119032506);\n  const [message , setMessage] = useState(\"Hello World\")\n  const [isSaving, setSaving] = useState(false);\n  const [status , setStatus] = useState(false); //completed processing?\n  const onDetected = result => {\n    setResult(result);\n  };\n  \n  function sendToken(){\n    Api.sendToken(result)\n    .then(res=>{\n      // console.log(res.data)\n      setMessage(\"Sucessfully Saved to Database\")\n      setStatus(true)\n    })\n    .catch(err=>{\n      // console.log(err.message)\n      setMessage(err.response.data)\n      setStatus(true)\n    })\n    setSaving(true)\n    setCamera(!camera)\n    setMessage(\"Saving data to the database...\")\n  }\n  if(isSaving){\n\n    if (status){\n      return(\n        <Segment>\n          <h2> {message}</h2>\n            <div className=\"button-button\">\n                <Button onClick={()=>{\n                  // history.push('/scan')\n                  setSaving(false)\n                  setStatus(false)\n                  setCamera(!camera)\n                  setMessage(\"\")\n                }} inverted color= \"green\"> Scan Another</Button>\n                <Button onClick={()=>history.push('/add')} inverted color = \"yellow\"> Add Product</Button>\n            </div>\n          </Segment>\n      )\n    }else{\n      return(\n        <Segment>\n          <h2>  {message} </h2>\n        </Segment>\n      )\n    }\n  }\n  return (\n    <>\n    <Segment >\n      <div className=\"container\">\n        {camera && <Scanner onDetected={onDetected} />}\n      </div>\n\n      <h3> Scanned Code : <span style={{color:\"green\"}}> {result} </span></h3>      \n      <Button inverted color= \"blue\" onClick={() => sendToken()}>\n       Save\n      </Button>\n      <Button onClick={()=>history.push('/add')} inverted color = \"yellow\"> Add Manually</Button>\n    </Segment>\n    </>\n  );\n}\n"],"sourceRoot":""}